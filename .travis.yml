# Deploy to GitHub pages on commits to master
#
#  1. Clone current gh-pages branch into dist/
#  2. Copy in new README
#  3. Push dist/ directory to gh-pages branch
#
# Cloning the existing gh-pages branch ensures that we don't lose the
# CNAME, _config.yaml, and any other files generated by gh-pages when
# pushing the new README.

script:
  # Sync changes with https://notabug.org/CodyReichert/awesome-cl
  - git remote add notabug https://notabug.org/CodyReichert/awesome-cl.git
  - git push notabug master
  # Publish changes to https://awesome-cl.com
  - git clone --branch=gh-pages https://github.com/CodyReichert/awesome-cl dist
  - cp README.md dist/index.md
deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GH_TOKEN
  keep-history: true
  local-dir: dist
  on:
    branch: master
